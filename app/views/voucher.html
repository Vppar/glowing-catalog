<div class="container ng-scope" >

	<!-- HEADER -->
	<div class="row-fluid">
		<span class="span12"><span ng-include src="'views/parts/global/header.html'"></span></span>
	</div>
	
	<div class="form-order-list new-page">
    
		<div class="row-fluid pull-right panel-top">

			<!-- BREAD CRUMBS -->
			<div class="row-fluid bread-crumbs">
				<span class="span6">
					<span class="principal">Vale / Cupom</span> 
				</span>
				<span class="span6">
					<div class="float-right">
						<span class="menu-level">
							<div class="btn-group btn-group-sm"  ng-init="voucherSelected='new'">
								<a class="btn btn-option" ng-click="voucherSelected='new'" ng-class="{active: voucherSelected === 'new'}">Em aberto</a> 
								<a class="btn btn-option" ng-click="voucherSelected='hist'" ng-class="{active: voucherSelected === 'hist'}">Hist&oacute;rico</a>
							</div>
						</span>
					</div>
				</span>
			</div>
				
		</div>		
	
		<div ng-switch="voucherSelected" style="height:100%;">	
		
			<!--EM ABERTO-->
			<div class="row-fluid" ng-switch-when="new" ng-controller="VoucherActiveCtrl" style="height:100%;">
			
				<!-- DATE INTERVAL -->
				<div class="row-fluid filter-bar">
				
					<span class="span4">			
						<div class="controls">
							<div class="control-group lbl-top">
								<div class="controls">
									Saldo em aberto <input id="dtIni" type="text" placeholder="" show-weeks="false" datepicker-popup="dd/MM/yyyy" class="date-field input-small"  required readonly ng-model="voucherFilter.date">
								</div>
							</div>
							<div class="control-group lbl-top">
								<span class="ic-calendar hover-state-pointer calendar-financial"><label for="dtIni" class="ic-calendar hover-state-pointer"><img src="images/icons/ic-calendar.png"></label></span>
							</div>	
						</div>				
					</span>
					
					<span class="span8 marginl7">				
						<div class="controls">
							<div class="control-group lbl-top">
								<input type="text" placeholder="Filtro" class="date-field input-small filter-voucher" ng-model="voucherFilter.value">
							</div>	
						</div>
					</span>	
				</div>

				<div class="grid-voucher" style="height: calc(100% - 152px);">
					<div class="row-fluid">
						<div class="new-body-header">
							<span class="new-col-3 text-center">Item</span>
							<span class="new-col-14">Terceiro</span>
							<span class="new-col-4 text-center">Vale / Cupom</span>
							<span class="new-col-3 currency">Vlr. Total</span>
						</div>
					</div>
					<div class="row-fluid">
						<div class="voucher-new-subtitle">
							<span class="new-col-3 text-center">{{qtyTotal}}</span>
							<span class="new-col-14">{{entityCounter}}</span>
							<span class="new-col-4 text-center">&nbsp;</span>
							<span class="new-col-3 currency">{{priceTotal | currency: '' }}</span>
								<!--<input type="text" placeholder="Filtro Terceiro" class="date-field input-small" ng-model="filter.entity">-->
						</div>
					</div>
					<div class="scroll-grid" style="height: calc(100% - 89px);overflow-y: scroll;overflow-x: hidden;">
						<div class="row-fluid" style="border-bottom: 1px dotted #666;min-height:42px;" ng-repeat="voucher in filteredVouchers | orderBy:'+entity'">
							<span class="new-col-3 text-center">{{$index+1}}</span>
							<span class="new-col-14">{{voucher.entity}}</span>
							<span class="new-col-4 text-center">{{voucher.type}}</span>
							<span class="new-col-3 currency">{{voucher.amount | currency: ''}}</span>
						</div>
					</div>
				</div>	
					
				<br/>			
			</div>
			
			<!--HISTORICO-->
			
			<div class="row-fluid" ng-switch-when="hist" ng-controller="VoucherHistoricCtrl" style="height: calc(100% - 15px);">
			
				<!-- DATE INTERVAL -->
				<div class="row-fluid filter-bar">
				
					<span class="span3">			
						<div class="controls">
							<div class="control-group lbl-top">
								<div class="controls">
									Per&iacute;odo <input id="dtIni" type="text" placeholder="" show-weeks="false" datepicker-popup="dd/MM/yyyy" class="date-field input-small" readonly required ng-model="historicVoucher.dtInitial">
								</div>
							</div>
							<div class="control-group lbl-top">
								<span class="ic-calendar hover-state-pointer calendar-financial"><label for="dtIni" class="ic-calendar hover-state-pointer"><img src="images/icons/ic-calendar.png"></label></span>
							</div>	
						</div>				
					</span>
					
					<span class="span3 marginl7">				
						<div class="controls">
							<div class="control-group lbl-top">
								<div class="controls">
									<input id="dtFin" type="text" placeholder="" show-weeks="false" datepicker-popup="dd/MM/yyyy" class="date-field input-small" readonly required min="historicVoucher.dtInitial" ng-model="historicVoucher.dtFinal">
								</div>
							</div>
							<div class="control-group lbl-top">
								<span class="ic-calendar hover-state-pointer calendar-financial"><label for="dtFin" class="ic-calendar hover-state-pointer"><img src="images/icons/ic-calendar.png"></label></span>
							</div>	
						</div>				
					</span>					
					
					<span class="span6 marginln">				
						<div class="controls">
							<div class="control-group lbl-top">
								<input type="text" placeholder="Filtro" class="date-field input-small filter-voucher" ng-model="historicVoucher.value">
							</div>	
						</div>				
					</span>	
				
				</div>
				<br/>
					
				<!--<div class="controls-row">
					<div class="control-group lbl-top">
						<select ui-select2 name="product" class="combo-width-product-voucher voucher-fields1" ng-model="voucher.productId" ng-click="setAmount(voucher.productId)">								
							<option value="">Terceiro</option>
							<option ng-repeat="product in products" value="{{product.id}}">{{product.title}}</option>
						</select>
					</div>
					<div class="control-group lbl-top">
						<select ui-select2 name="product" class="combo-width-product-voucher voucher-fields2" ng-model="voucher.productId" ng-click="setAmount(voucher.productId)">								
							<option value="">Status</option>
							<option ng-repeat="product in products" value="{{product.id}}">{{product.title}}</option>
						</select>
					</div>
				</div>
				<br/>-->
			
				<form style="height: calc(100% - 146px);">
					<div class="controls-row" style="height: 100%;">
						<div class="row-fluid">
							<div class="new-body-header">
								<span class="new-col-3 text-center">Data</span>
								<span class="new-col-12">Terceiro</span>
								<span class="new-col-3 text-center">Vale/Cupom</span>
								<span class="new-col-3 text-center">Cr&eacute;dito/D&eacute;bito</span>
								<span class="new-col-3 currency">Vlr. Total</span>
							</div>
						</div>
						<div class="scroll-grid" style="height: calc(100% - 34px);overflow-y: scroll;overflow-x: hidden;">
							<div class="row-fluid" style="border-bottom: 1px dotted #666; min-height:42px;" ng-repeat="voucher in historicVouchers | orderBy:'-created'">
								<span class="new-col-3 text-center" ng-if="!voucher.redeemed">{{voucher.created | date:'dd/MM/yyyy'}}</span>
								<span class="new-col-3 text-center" ng-if="voucher.redeemed">{{voucher.redeemed | date:'dd/MM/yyyy'}}</span>
								<span class="new-col-12">{{voucher.entity}}</span>
								<span class="new-col-3 text-center">{{voucher.type}}</span>
								<span class="new-col-3 text-center">{{isRedeemed(voucher) ? 'Débito' : isCanceled(voucher) ? 'Cancelado' : 'Crédito'}}</span>
								<span class="new-col-3 currency">{{voucher.amount | currency:''}}</span>
							</div>
						</div>
					</div>
				</form>
				
			</div>
			
		</div>
	</div>
	
</div>
